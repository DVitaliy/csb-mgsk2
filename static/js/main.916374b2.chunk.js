(this["webpackJsonpatlana-react-test-task"]=this["webpackJsonpatlana-react-test-task"]||[]).push([[0],{25:function(e,t,c){"use strict";c.r(t);var s=c(8),a=c(3),n=c(2),r=c(1),l=c(10),i=c(6),o=c.n(i),j=function(){var e=Object(l.a)(o.a.mark((function e(t,c,s){var a,n,r,l;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://api.github.com/".concat(t));case 3:return a=e.sent,e.next=6,a.json();case 6:if(n=e.sent,r=Number(a.headers.get("x-ratelimit-reset")),!a.ok){e.next=12;break}c(n),e.next=24;break;case 12:l=n.message,e.t0=a.status,e.next=403===e.t0?16:404===e.t0?18:422===e.t0?20:22;break;case 16:return l+="\nIt'll over at ".concat(new Date(1e3*r)),e.abrupt("break",23);case 18:case 20:return l="123",e.abrupt("break",23);case 22:throw new Error("Unknow status: ".concat(a.status));case 23:throw new Error(l);case 24:e.next=30;break;case 26:e.prev=26,e.t1=e.catch(0),s&&s(String(e.t1)),console.error("getDataUserDetail",e.t1);case 30:case"end":return e.stop()}}),e,null,[[0,26]])})));return function(t,c,s){return e.apply(this,arguments)}}(),u=j,b=c(0),d=function(e){var t=e.user,c=t.login,s=t.avatar_url,l=Object(r.useState)(void 0),i=Object(n.a)(l,2),o=i[0],j=i[1];return Object(r.useEffect)((function(){var e="users/".concat(c);try{var t=localStorage.getItem(e);if(t){var s=JSON.parse(t);j(s.public_repos)}else u(e,(function(t){localStorage.setItem(e,JSON.stringify(t)),j(t.public_repos)}),(function(){return j(null)}))}catch(a){}}),[c]),Object(b.jsxs)("div",{className:"panel-block",children:[Object(b.jsx)("figure",{className:"image is-32x32",children:Object(b.jsx)(a.a,{to:"u/".concat(c),children:Object(b.jsx)("img",{src:"".concat(s,"&s=32"),alt:c})})}),Object(b.jsx)(a.a,{to:"u/".concat(c),className:"is-size-5 is-flex-grow-1 ml-5",children:c}),Object(b.jsxs)("div",{children:["Repo:"," ",null!==o&&void 0!==o?o:Object(b.jsx)("span",{className:"icon",children:void 0===o?Object(b.jsx)("i",{className:"fas fa-spinner fa-pulse"}):Object(b.jsx)("i",{className:"fas fa-ban"})})]})]})},h=function(e){var t=e.user,c=t.name,s=t.login,a=t.avatar_url,n=t.email,r=t.location,l=t.bio,i=t.followers,o=t.following,j=t.created_at;return Object(b.jsxs)("article",{className:"media p-3",children:[Object(b.jsx)("figure",{className:"media-left",children:Object(b.jsx)("p",{className:"image is-128x128",children:Object(b.jsx)("img",{src:"".concat(a,"&s=128"),alt:s})})}),Object(b.jsxs)("div",{className:"media-content",children:[Object(b.jsx)("div",{className:"content",children:Object(b.jsxs)("p",{children:[Object(b.jsx)("strong",{children:c||s})," ",Object(b.jsxs)("small",{children:["@",s," ",n]}),Object(b.jsx)("span",{className:"tag is-pulled-right",children:j}),Object(b.jsx)("br",{}),Object(b.jsx)("small",{children:r}),Object(b.jsx)("br",{}),l]})}),Object(b.jsxs)("nav",{className:"level is-mobile",children:[Object(b.jsx)("div",{className:"level-item has-text-centered",children:Object(b.jsxs)("div",{children:[Object(b.jsx)("p",{className:"heading",children:"Following"}),Object(b.jsx)("p",{className:"title is-size-4",children:o})]})}),Object(b.jsx)("div",{className:"level-item has-text-centered",children:Object(b.jsxs)("div",{children:[Object(b.jsx)("p",{className:"heading",children:"Followers"}),Object(b.jsx)("p",{className:"title is-size-4",children:i})]})})]})]})]})},O=function(e){var t=e.repo,c=t.name,s=t.html_url,a=t.stargazers_count,n=t.forks_count;return Object(b.jsxs)("div",{className:"panel-block",children:[Object(b.jsx)("a",{href:s,className:"is-size-5 is-flex-grow-1",target:"_blank",rel:"noreferrer",children:c}),Object(b.jsxs)("div",{children:[Object(b.jsxs)("div",{className:"has-text-right",children:[n," Forks"]}),Object(b.jsxs)("div",{className:"has-text-right",children:[a," Stars"]})]})]})},x=c(11),f=c(12),m=["setvalue","path"],p=function(e){var t=e.setvalue,c=e.path,s=Object(f.a)(e,m),l=Object(r.useRef)(void 0),i=Object(a.d)(),o=Object(r.useCallback)((function(){var e;return i?decodeURIComponent(null!==(e=new URLSearchParams(i.search).get("q"))&&void 0!==e?e:""):""}),[i]),j=Object(r.useState)((function(){return o()})),u=Object(n.a)(j,2),d=u[0],h=u[1];return Object(r.useEffect)((function(){return clearTimeout(l.current),l.current=window.setTimeout((function(){d!==o()&&Object(a.c)("".concat(c,"?q=").concat(encodeURIComponent(d))),t(d)}),1e3),function(){return clearTimeout(l.current)}}),[d,c,t,o]),Object(r.useEffect)((function(){h(o())}),[o]),Object(b.jsx)("div",{className:"panel-block",children:Object(b.jsxs)("p",{className:"control has-icons-left",children:[Object(b.jsx)("input",Object(x.a)({className:"input",type:"text",value:null!==d&&void 0!==d?d:"",onChange:function(e){var t=e.target.value;h(t)}},s)),Object(b.jsx)("span",{className:"icon is-left",children:Object(b.jsx)("i",{className:"fas fa-search","aria-hidden":"true"})})]})})},v=function(){return Object(b.jsx)("div",{className:"panel-block",children:Object(b.jsx)("h2",{className:"is-5 has-text-link is-capitalized",children:"Loading.."})})},g=function(){return Object(b.jsx)("div",{className:"panel-block",children:Object(b.jsx)("h2",{className:"is-5 has-text-grey-lighter is-capitalized",children:"not found"})})},N=function(e){var t=e.children;return Object(b.jsx)("div",{className:"panel-block",children:Object(b.jsxs)("article",{className:"message is-danger",children:[Object(b.jsx)("div",{className:"message-header",children:Object(b.jsx)("p",{children:"Error"})}),Object(b.jsx)("div",{className:"message-body",children:t})]})})},S=function(e){var t=e.login,c=e.uri,s=e.location,a=Object(r.useState)(null),l=Object(n.a)(a,2),i=l[0],o=l[1],j=Object(r.useState)(null),d=Object(n.a)(j,2),x=d[0],f=d[1],m=Object(r.useState)(null),S=Object(n.a)(m,2),k=S[0],w=S[1],y=Object(r.useState)((function(){var e;return s?decodeURIComponent(null!==(e=new URLSearchParams(s.search).get("q"))&&void 0!==e?e:""):""})),I=Object(n.a)(y,2),E=I[0],U=I[1];return Object(r.useEffect)((function(){var e="users/".concat(t);try{var c=localStorage.getItem(e);c?f(JSON.parse(c)):u(e,(function(t){localStorage.setItem(e,JSON.stringify(t)),f(t)}),(function(e){o(e)}))}catch(s){}}),[t]),Object(r.useEffect)((function(){if(x&&x.public_repos){var e=encodeURIComponent("".concat(E," user:").concat(t));try{var c=localStorage.getItem(e);if(c){var s=JSON.parse(c);w(s.length?s:null)}else u("search/repositories?q=".concat(e),(function(e){var t=e.items;w(t.length?t:null)}),(function(e){o(e)}))}catch(a){}}}),[t,x,E]),Object(r.useEffect)((function(){return function(){return o(null)}}),[]),i?Object(b.jsx)(N,{children:i}):Object(b.jsxs)(r.Fragment,{children:[x?Object(b.jsx)(h,{user:x}):Object(b.jsx)(v,{}),Object(b.jsx)(p,{placeholder:"Search for User's Repositories",path:null!==c&&void 0!==c?c:"/u/".concat(t),setvalue:U,disabled:!x||!x.public_repos}),k&&k.map((function(e){return Object(b.jsx)(O,{repo:e},e.id)})),!x&&null===k&&Object(b.jsx)(v,{}),x&&E&&null===k&&Object(b.jsx)(g,{}),x&&!x.public_repos&&Object(b.jsx)(g,{})]})},k=function(e){var t=e.uri,c=e.location,s=Object(r.useState)(null),a=Object(n.a)(s,2),l=a[0],i=a[1],o=Object(r.useState)((function(){var e;return c?decodeURIComponent(null!==(e=new URLSearchParams(c.search).get("q"))&&void 0!==e?e:""):""})),j=Object(n.a)(o,2),h=j[0],O=j[1],x=Object(r.useState)([]),f=Object(n.a)(x,2),m=f[0],v=f[1];return Object(r.useEffect)((function(){if(h){var e="q=".concat(h);try{var t=localStorage.getItem(e);if(t){var c=JSON.parse(t);v(c.length?c:null)}else u("search/users?".concat(e),(function(t){var c=t.items;localStorage.setItem(e,JSON.stringify(c)),v(c.length?c:null)}),(function(e){i(e)}))}catch(s){console.error(s)}}else v([])}),[h]),Object(r.useEffect)((function(){return function(){return i(null)}}),[]),l?Object(b.jsx)(N,{children:l}):Object(b.jsxs)(r.Fragment,{children:[Object(b.jsx)(p,{placeholder:"Search for Users",path:null!==t&&void 0!==t?t:"/",setvalue:O}),m&&m.map((function(e){return Object(b.jsx)(d,{user:e},e.id)})),h&&null===m&&Object(b.jsx)(g,{})]})};function w(){return Object(b.jsxs)("article",{className:"panel",children:[Object(b.jsx)("p",{className:"panel-heading",children:Object(b.jsx)(a.a,{to:"/",children:"GitHub searcher"})}),Object(b.jsxs)(a.b,{children:[Object(b.jsx)(k,{path:"/"}),Object(b.jsx)(S,{path:"/u/:login"})]}),Object(b.jsx)("div",{className:"panel-block is-pulled-right",children:Object(b.jsx)(a.a,{to:"/u/dvitaliy",className:"has-text-grey-lighter is-pulled-right",children:"@DVitaliy"})})]})}var y=document.getElementById("root");Object(s.render)(Object(b.jsx)(w,{}),y)}},[[25,1,2]]]);
//# sourceMappingURL=main.916374b2.chunk.js.map