{"version":3,"sources":["api.ts","Components/card.tsx","Components/input.tsx","Components/loading.tsx","Components/notfound.tsx","Components/error.tsx","pages/details.tsx","pages/listing.tsx","App.tsx","index.tsx"],"names":["getData","endpoint","cb","err","a","fetch","response","json","item","ratelimitReset","Number","headers","get","ok","message","status","Date","Error","String","console","error","CardList","user","login","avatar_url","useState","undefined","userRepos","setUserRepos","useEffect","storageUser","localStorage","getItem","data","JSON","parse","setItem","stringify","className","to","src","alt","CardDetail","name","email","location","bio","followers","following","created_at","CardRepo","repo","html_url","stargazers_count","forks_count","href","target","rel","Input","setvalue","path","props","timer","useRef","useLocation","getSearchValue","useCallback","decodeURIComponent","URLSearchParams","search","query","setQuery","clearTimeout","current","window","setTimeout","navigate","encodeURIComponent","type","value","onChange","e","Loading","NotFound","children","Details","uri","responseErr","setResponseErr","userDetail","setUserDetail","userRepoList","setUserRepoList","repoName","setRepoName","public_repos","storageRepo","items","length","placeholder","disabled","map","id","Listing","username","setUsername","listUsers","setListusers","storage","App","rootElement","document","getElementById","render"],"mappings":"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","file":"static/js/main.916374b2.chunk.js","sourcesContent":["interface IErr {\r\n  message: string\r\n}\r\n\r\nconst getData = async <T>(endpoint: string, cb: (args: T) => void, err?: (args: string) => void): Promise<void> => {\r\n  try {\r\n    const response = await fetch(`https://api.github.com/${endpoint}`)\r\n    const item: T & IErr = await response.json()\r\n\r\n    const ratelimitReset: number = Number(response.headers.get(\"x-ratelimit-reset\"))\r\n    // const ratelimitRemaining = response.headers.get(\"x-ratelimit-remaining\")\r\n    if (response.ok) {\r\n      cb(item)\r\n    } else {\r\n      let { message } = item\r\n      switch (response.status) {\r\n        case 403:\r\n          message += `\\nIt'll over at ${new Date(ratelimitReset * 1000)}`\r\n          break\r\n        case 404:\r\n          message = \"123\"\r\n          break\r\n        case 422:\r\n          message = \"123\"\r\n          break\r\n        default:\r\n          throw new Error(`Unknow status: ${response.status}`)\r\n      }\r\n      throw new Error(message)\r\n    }\r\n  } catch (error) {\r\n    if (err) err(String(error))\r\n    console.error(\"getDataUserDetail\", error)\r\n  }\r\n}\r\nexport default getData\r\n/*\r\nlet timer: number | undefined\r\nconst arr: Array<[() => void, string, string]> = []\r\n\r\nconst iterator = () => {\r\n  console.log(\"start iterator\", arr)\r\n\r\n  if (arr.length) {\r\n    const next = arr.shift()\r\n\r\n    // @ts-ignore\r\n    const [target, thisArg, args] = next\r\n    const [endpoint, cb, err] = args\r\n    Reflect.apply(target, thisArg, [\r\n      endpoint,\r\n      (i: any) => {\r\n        window.setTimeout(iterator, 1000)\r\n        cb(i)\r\n      },\r\n      err\r\n    ])\r\n  }\r\n}\r\n\r\nexport default new Proxy(getData, {\r\n  apply(target, thisArg, args: keyof typeof getData) {\r\n    // @ts-ignore\r\n    arr.push([target, thisArg, args])\r\n    // arr.push(() => Reflect.apply(target, thisArg, args))\r\n\r\n    clearTimeout(timer)\r\n    timer = window.setTimeout(iterator, 500)\r\n  }\r\n})\r\n*/\r\n","import { FC, useEffect, useState } from \"react\"\r\nimport { Link } from \"@reach/router\"\r\nimport { IUserDetails, IUserRepoDetails } from \"../pages/details\"\r\nimport getData from \"../api\"\r\n\r\ninterface ICard {\r\n  user: IUserDetails\r\n}\r\ninterface ICardRepo {\r\n  repo: IUserRepoDetails\r\n}\r\n\r\nexport const CardList: FC<ICard> = ({ user }) => {\r\n  const { login, avatar_url } = user\r\n  const [userRepos, setUserRepos] = useState<IUserDetails[\"public_repos\"] | null | undefined>(undefined)\r\n\r\n  useEffect(() => {\r\n    const endpoint = `users/${login}`\r\n    try {\r\n      const storageUser = localStorage.getItem(endpoint)\r\n      if (storageUser) {\r\n        const data = JSON.parse(storageUser) as IUserDetails\r\n        setUserRepos(data[\"public_repos\"])\r\n      } else {\r\n        getData<IUserDetails>(\r\n          endpoint,\r\n          (item) => {\r\n            localStorage.setItem(endpoint, JSON.stringify(item))\r\n            setUserRepos(item[\"public_repos\"])\r\n          },\r\n          () => setUserRepos(null)\r\n        )\r\n      }\r\n    } catch {}\r\n  }, [login])\r\n\r\n  return (\r\n    <div className=\"panel-block\">\r\n      <figure className=\"image is-32x32\">\r\n        <Link to={`u/${login}`}>\r\n          <img src={`${avatar_url}&s=32`} alt={login} />\r\n        </Link>\r\n      </figure>\r\n      <Link to={`u/${login}`} className=\"is-size-5 is-flex-grow-1 ml-5\">\r\n        {login}\r\n      </Link>\r\n      <div>\r\n        Repo:{\" \"}\r\n        {userRepos ?? (\r\n          <span className=\"icon\">\r\n            {userRepos === undefined ? <i className=\"fas fa-spinner fa-pulse\"></i> : <i className=\"fas fa-ban\"></i>}\r\n          </span>\r\n        )}\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport const CardDetail: FC<ICard> = ({ user }) => {\r\n  const { name, login, avatar_url, email, location, bio, followers, following, created_at } = user\r\n  return (\r\n    <article className=\"media p-3\">\r\n      <figure className=\"media-left\">\r\n        <p className=\"image is-128x128\">\r\n          <img src={`${avatar_url}&s=128`} alt={login} />\r\n        </p>\r\n      </figure>\r\n      <div className=\"media-content\">\r\n        <div className=\"content\">\r\n          <p>\r\n            <strong>{name || login}</strong>{\" \"}\r\n            <small>\r\n              @{login} {email}\r\n            </small>\r\n            <span className=\"tag is-pulled-right\">{created_at}</span>\r\n            <br />\r\n            <small>{location}</small>\r\n            <br />\r\n            {bio}\r\n          </p>\r\n        </div>\r\n        <nav className=\"level is-mobile\">\r\n          <div className=\"level-item has-text-centered\">\r\n            <div>\r\n              <p className=\"heading\">Following</p>\r\n              <p className=\"title is-size-4\">{following}</p>\r\n            </div>\r\n          </div>\r\n          <div className=\"level-item has-text-centered\">\r\n            <div>\r\n              <p className=\"heading\">Followers</p>\r\n              <p className=\"title is-size-4\">{followers}</p>\r\n            </div>\r\n          </div>\r\n        </nav>\r\n      </div>\r\n    </article>\r\n  )\r\n}\r\n\r\nexport const CardRepo: FC<ICardRepo> = ({ repo }) => {\r\n  const { name, html_url, stargazers_count, forks_count } = repo\r\n  return (\r\n    <div className=\"panel-block\">\r\n      <a href={html_url} className=\"is-size-5 is-flex-grow-1\" target=\"_blank\" rel=\"noreferrer\">\r\n        {name}\r\n      </a>\r\n      <div>\r\n        <div className=\"has-text-right\">{forks_count} Forks</div>\r\n        <div className=\"has-text-right\">{stargazers_count} Stars</div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n","import React, { FC, useState, useEffect, useRef, useCallback } from \"react\"\r\nimport { navigate, useLocation } from \"@reach/router\"\r\n\r\ninterface IInputProps extends React.InputHTMLAttributes<HTMLInputElement> {\r\n  path: string\r\n  setvalue: React.Dispatch<React.SetStateAction<string>>\r\n}\r\n\r\nconst Input: FC<IInputProps> = ({ setvalue, path, ...props }) => {\r\n  const timer = useRef<number | undefined>(undefined)\r\n  const location = useLocation()\r\n\r\n  const getSearchValue = useCallback(() => {\r\n    return location ? decodeURIComponent(new URLSearchParams(location.search).get(\"q\") ?? \"\") : \"\"\r\n  }, [location])\r\n\r\n  const [query, setQuery] = useState<string>(() => getSearchValue())\r\n\r\n  const handleChange = (e: React.SyntheticEvent) => {\r\n    const { value } = e.target as HTMLInputElement\r\n    setQuery(value)\r\n  }\r\n\r\n  useEffect(() => {\r\n    clearTimeout(timer.current)\r\n    timer.current = window.setTimeout(() => {\r\n      if (query !== getSearchValue()) navigate(`${path}?q=${encodeURIComponent(query)}`)\r\n      setvalue(query)\r\n    }, 1000)\r\n\r\n    return () => clearTimeout(timer.current)\r\n  }, [query, path, setvalue, getSearchValue])\r\n\r\n  // need for history back\r\n  useEffect(() => {\r\n    setQuery(getSearchValue())\r\n  }, [getSearchValue])\r\n\r\n  return (\r\n    <div className=\"panel-block\">\r\n      <p className=\"control has-icons-left\">\r\n        <input className=\"input\" type=\"text\" value={query ?? \"\"} onChange={handleChange} {...props} />\r\n        <span className=\"icon is-left\">\r\n          <i className=\"fas fa-search\" aria-hidden=\"true\"></i>\r\n        </span>\r\n      </p>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Input\r\n","import { FC } from \"react\"\r\n\r\nexport const Loading: FC = () => {\r\n  return (\r\n    <div className=\"panel-block\">\r\n      <h2 className=\"is-5 has-text-link is-capitalized\">Loading..</h2>\r\n    </div>\r\n  )\r\n}\r\n","import { FC } from \"react\"\r\n\r\nexport const NotFound: FC = () => {\r\n  return (\r\n    <div className=\"panel-block\">\r\n      <h2 className=\"is-5 has-text-grey-lighter is-capitalized\">not found</h2>\r\n    </div>\r\n  )\r\n}\r\n","import { FC } from \"react\"\n\nexport const Error: FC = ({ children }) => {\n  return (\n    <div className=\"panel-block\">\n      <article className=\"message is-danger\">\n        <div className=\"message-header\">\n          <p>Error</p>\n        </div>\n        <div className=\"message-body\">{children}</div>\n      </article>\n    </div>\n  )\n}\n","import { RouteComponentProps } from \"@reach/router\"\r\nimport { FC, Fragment, useEffect, useState } from \"react\"\r\nimport { CardDetail, CardRepo } from \"../Components/card\"\r\nimport Input from \"../Components/input\"\r\nimport { Loading } from \"../Components/loading\"\r\nimport { NotFound } from \"../Components/notfound\"\r\nimport { Error } from \"../Components/error\"\r\nimport getData from \"../api\"\r\n\r\nexport interface IUserDetails {\r\n  id: string\r\n  login: string\r\n  avatar_url: string\r\n  name: string | null\r\n  email: string | null\r\n  location: string\r\n  created_at: string\r\n  bio: string | null\r\n  followers: number\r\n  following: number\r\n  public_repos: number\r\n}\r\nexport interface IUserRepoDetails {\r\n  id: string\r\n  name: string\r\n  html_url: string\r\n  stargazers_count: number\r\n  forks_count: number\r\n}\r\n\r\ninterface IDetailsProps extends RouteComponentProps {\r\n  login?: string\r\n}\r\n\r\nconst Details: FC<IDetailsProps> = ({ login, uri, location }) => {\r\n  const [responseErr, setResponseErr] = useState<string | null>(null)\r\n  const [userDetail, setUserDetail] = useState<IUserDetails | null>(null)\r\n  const [userRepoList, setUserRepoList] = useState<IUserRepoDetails[] | null>(null)\r\n  const [repoName, setRepoName] = useState<string>(() => {\r\n    return location ? decodeURIComponent(new URLSearchParams(location.search).get(\"q\") ?? \"\") : \"\"\r\n  })\r\n\r\n  // Get user data\r\n  useEffect(() => {\r\n    const endpoint = `users/${login}`\r\n    try {\r\n      const storageUser = localStorage.getItem(endpoint)\r\n      if (storageUser) setUserDetail(JSON.parse(storageUser))\r\n      else {\r\n        getData<IUserDetails>(\r\n          endpoint,\r\n          (item) => {\r\n            localStorage.setItem(endpoint, JSON.stringify(item))\r\n            setUserDetail(item)\r\n          },\r\n          (err) => {\r\n            setResponseErr(err)\r\n          }\r\n        )\r\n      }\r\n    } catch {}\r\n  }, [login])\r\n\r\n  // Get user's repo data\r\n  useEffect(() => {\r\n    if (userDetail && userDetail.public_repos) {\r\n      const endpoint = encodeURIComponent(`${repoName} user:${login}`)\r\n      try {\r\n        const storageRepo = localStorage.getItem(endpoint)\r\n        if (storageRepo) {\r\n          const items = JSON.parse(storageRepo) as IUserRepoDetails[]\r\n          setUserRepoList(items.length ? items : null)\r\n        } else {\r\n          getData<{ items: IUserRepoDetails[] }>(\r\n            `search/repositories?q=${endpoint}`,\r\n            (data) => {\r\n              const items = data.items as IUserRepoDetails[]\r\n              //localStorage.setItem(endpoint, JSON.stringify(items))\r\n              setUserRepoList(items.length ? items : null)\r\n            },\r\n            (err) => {\r\n              setResponseErr(err)\r\n            }\r\n          )\r\n        }\r\n      } catch {}\r\n    }\r\n  }, [login, userDetail, repoName])\r\n\r\n  useEffect(() => {\r\n    return () => setResponseErr(null)\r\n  }, [])\r\n\r\n  if (responseErr) return <Error>{responseErr}</Error>\r\n\r\n  return (\r\n    <Fragment>\r\n      {userDetail ? <CardDetail user={userDetail} /> : <Loading />}\r\n      <Input\r\n        placeholder=\"Search for User's Repositories\"\r\n        path={uri ?? `/u/${login}`}\r\n        setvalue={setRepoName}\r\n        disabled={!userDetail || !!!userDetail.public_repos}\r\n      />\r\n      {userRepoList && userRepoList.map((repo) => <CardRepo key={repo.id} repo={repo} />)}\r\n      {!userDetail && userRepoList === null && <Loading />}\r\n      {userDetail && repoName && userRepoList === null && <NotFound />}\r\n      {userDetail && !userDetail.public_repos && <NotFound />}\r\n    </Fragment>\r\n  )\r\n}\r\nexport default Details\r\n","import { RouteComponentProps } from \"@reach/router\"\r\nimport { FC, Fragment, useEffect, useState } from \"react\"\r\nimport { CardList } from \"../Components/card\"\r\nimport Input from \"../Components/input\"\r\nimport { NotFound } from \"../Components/notfound\"\r\nimport { Error } from \"../Components/error\"\r\nimport { IUserDetails } from \"./details\"\r\nimport getData from \"../api\"\r\n\r\nconst Listing: FC<RouteComponentProps> = ({ uri, location }) => {\r\n  const [responseErr, setResponseErr] = useState<string | null>(null)\r\n  const [username, setUsername] = useState<string>(() => {\r\n    return location ? decodeURIComponent(new URLSearchParams(location.search).get(\"q\") ?? \"\") : \"\"\r\n  })\r\n  const [listUsers, setListusers] = useState<IUserDetails[] | null>([])\r\n\r\n  useEffect(() => {\r\n    if (username) {\r\n      const endpoint = `q=${username}`\r\n      try {\r\n        const storage = localStorage.getItem(endpoint)\r\n        if (storage) {\r\n          const items = JSON.parse(storage) as IUserDetails[]\r\n          setListusers(items.length ? items : null)\r\n        } else {\r\n          getData<{ items: IUserDetails[] }>(\r\n            `search/users?${endpoint}`,\r\n            (data) => {\r\n              const items = data.items as IUserDetails[]\r\n              localStorage.setItem(endpoint, JSON.stringify(items))\r\n              setListusers(items.length ? items : null)\r\n            },\r\n            (err) => {\r\n              setResponseErr(err)\r\n            }\r\n          )\r\n        }\r\n      } catch (error) {\r\n        console.error(error)\r\n      }\r\n    } else {\r\n      setListusers([])\r\n    }\r\n  }, [username])\r\n\r\n  useEffect(() => {\r\n    return () => setResponseErr(null)\r\n  }, [])\r\n\r\n  if (responseErr) return <Error>{responseErr}</Error>\r\n\r\n  return (\r\n    <Fragment>\r\n      <Input placeholder=\"Search for Users\" path={uri ?? \"/\"} setvalue={setUsername} />\r\n\r\n      {listUsers && listUsers.map((user) => <CardList key={user.id} user={user} />)}\r\n\r\n      {username && listUsers === null && <NotFound />}\r\n    </Fragment>\r\n  )\r\n}\r\nexport default Listing\r\n","import { Router, Link } from \"@reach/router\"\nimport Details from \"./pages/details\"\nimport Listing from \"./pages/listing\"\n\nexport default function App() {\n  return (\n    <article className=\"panel\">\n      <p className=\"panel-heading\">\n        <Link to=\"/\">GitHub searcher</Link>\n      </p>\n      <Router>\n        <Listing path=\"/\" />\n        <Details path=\"/u/:login\" />\n      </Router>\n      <div className=\"panel-block is-pulled-right\">\n        <Link to=\"/u/dvitaliy\" className=\"has-text-grey-lighter is-pulled-right\">\n          @DVitaliy\n        </Link>\n      </div>\n    </article>\n  )\n}\n","import { render } from \"react-dom\";\n\nimport App from \"./App\";\n\nconst rootElement = document.getElementById(\"root\");\nrender(<App />, rootElement);\n"],"sourceRoot":""}