(this["webpackJsonpatlana-react-test-task"]=this["webpackJsonpatlana-react-test-task"]||[]).push([[0],{25:function(e,t,c){"use strict";c.r(t);var a=c(8),s=c(3),n=c(2),r=c(1),l=c(10),i=c(6),o=c.n(i),j=function(){var e=Object(l.a)(o.a.mark((function e(t,c,a){var s,n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://api.github.com/".concat(t));case 3:return s=e.sent,e.next=6,s.json();case 6:n=e.sent,e.t0=s.status,e.next=200===e.t0?10:403===e.t0||404===e.t0?12:14;break;case 10:return c(n),e.abrupt("break",15);case 12:throw r=n.message,new Error(r);case 14:throw new Error("Unknow status: ".concat(s.status));case 15:e.next=21;break;case 17:e.prev=17,e.t1=e.catch(0),a&&a(String(e.t1)),console.error("getDataUserDetail",e.t1);case 21:case"end":return e.stop()}}),e,null,[[0,17]])})));return function(t,c,a){return e.apply(this,arguments)}}(),u=c(0),b=function(e){var t=e.user,c=t.login,a=t.avatar_url,l=Object(r.useState)(null),i=Object(n.a)(l,2),o=i[0],b=i[1];return Object(r.useEffect)((function(){var e="users/".concat(c);try{var t=localStorage.getItem(e);if(t){var a=JSON.parse(t);b(a.public_repos)}else j(e,(function(t){localStorage.setItem(e,JSON.stringify(t)),b(t.public_repos)}))}catch(s){}}),[c]),Object(u.jsxs)("div",{className:"panel-block",children:[Object(u.jsx)("figure",{className:"image is-32x32",children:Object(u.jsx)("img",{src:"".concat(a,"&s=32"),alt:c})}),Object(u.jsx)(s.a,{to:"u/".concat(c),className:"is-size-5 is-flex-grow-1 ml-5",children:c}),Object(u.jsxs)("div",{children:["Repo:"," ",null!==o&&void 0!==o?o:Object(u.jsx)("span",{className:"icon",children:Object(u.jsx)("i",{className:"fas fa-spinner fa-pulse"})})]})]})},d=function(e){var t=e.user,c=t.name,a=t.login,s=t.avatar_url,n=t.email,r=t.location,l=t.bio,i=t.followers,o=t.following,j=t.created_at;return Object(u.jsxs)("article",{className:"media p-3",children:[Object(u.jsx)("figure",{className:"media-left",children:Object(u.jsx)("p",{className:"image is-128x128",children:Object(u.jsx)("img",{src:"".concat(s,"&s=128"),alt:a})})}),Object(u.jsxs)("div",{className:"media-content",children:[Object(u.jsx)("div",{className:"content",children:Object(u.jsxs)("p",{children:[Object(u.jsx)("strong",{children:c||a})," ",Object(u.jsxs)("small",{children:["@",a," ",n]}),Object(u.jsx)("span",{className:"tag is-pulled-right",children:j}),Object(u.jsx)("br",{}),Object(u.jsx)("small",{children:r}),Object(u.jsx)("br",{}),l]})}),Object(u.jsxs)("nav",{className:"level is-mobile",children:[Object(u.jsx)("div",{className:"level-item has-text-centered",children:Object(u.jsxs)("div",{children:[Object(u.jsx)("p",{className:"heading",children:"Following"}),Object(u.jsx)("p",{className:"title is-size-4",children:o})]})}),Object(u.jsx)("div",{className:"level-item has-text-centered",children:Object(u.jsxs)("div",{children:[Object(u.jsx)("p",{className:"heading",children:"Followers"}),Object(u.jsx)("p",{className:"title is-size-4",children:i})]})})]})]})]})},h=function(e){var t=e.repo,c=t.name,a=t.html_url,s=t.stargazers_count,n=t.forks_count;return Object(u.jsxs)("div",{className:"panel-block",children:[Object(u.jsx)("a",{href:a,className:"is-size-5 is-flex-grow-1",target:"_blank",rel:"noreferrer",children:c}),Object(u.jsxs)("div",{children:[Object(u.jsxs)("div",{className:"has-text-right",children:[n," Forks"]}),Object(u.jsxs)("div",{className:"has-text-right",children:[s," Stars"]})]})]})},O=c(11),m=c(12),f=["setvalue","path"],x=function(e){var t=e.setvalue,c=e.path,a=Object(m.a)(e,f),l=Object(r.useRef)(void 0),i=Object(s.d)(),o=Object(r.useCallback)((function(){var e;return i?decodeURIComponent(null!==(e=new URLSearchParams(i.search).get("q"))&&void 0!==e?e:""):""}),[i]),j=Object(r.useState)((function(){return o()})),b=Object(n.a)(j,2),d=b[0],h=b[1];return Object(r.useEffect)((function(){return clearTimeout(l.current),l.current=window.setTimeout((function(){d!==o()&&Object(s.c)("".concat(c,"?q=").concat(encodeURIComponent(d))),t(d)}),1e3),function(){return clearTimeout(l.current)}}),[d,c,t,o]),Object(r.useEffect)((function(){h(o())}),[o]),Object(u.jsx)("div",{className:"panel-block",children:Object(u.jsxs)("p",{className:"control has-icons-left",children:[Object(u.jsx)("input",Object(O.a)({className:"input",type:"text",value:null!==d&&void 0!==d?d:"",onChange:function(e){var t=e.target.value;h(t)}},a)),Object(u.jsx)("span",{className:"icon is-left",children:Object(u.jsx)("i",{className:"fas fa-search","aria-hidden":"true"})})]})})},p=function(){return Object(u.jsx)("div",{className:"panel-block",children:Object(u.jsx)("h2",{className:"is-5 has-text-link is-capitalized",children:"Loading.."})})},v=function(){return Object(u.jsx)("div",{className:"panel-block",children:Object(u.jsx)("h2",{className:"is-5 has-text-grey-lighter is-capitalized",children:"not found"})})},g=function(e){var t=e.login,c=e.uri,a=e.location,s=Object(r.useState)(null),l=Object(n.a)(s,2),i=l[0],o=l[1],b=Object(r.useState)(null),O=Object(n.a)(b,2),m=O[0],f=O[1],g=Object(r.useState)((function(){var e;return a?decodeURIComponent(null!==(e=new URLSearchParams(a.search).get("q"))&&void 0!==e?e:""):""})),N=Object(n.a)(g,2),S=N[0],k=N[1];return Object(r.useEffect)((function(){var e="users/".concat(t);try{var c=localStorage.getItem(e);c?o(JSON.parse(c)):j(e,(function(t){localStorage.setItem(e,JSON.stringify(t)),o(t)}),(function(e){alert(e)}))}catch(a){}}),[t]),Object(r.useEffect)((function(){if(i){var e=encodeURIComponent("".concat(S," user:").concat(t));try{var c=localStorage.getItem(e);if(c){var a=JSON.parse(c);f(a.length?a:null)}else j("search/repositories?q=".concat(e),(function(t){var c=t.items;localStorage.setItem(e,JSON.stringify(c)),f(c.length?c:null)}),(function(e){alert(e)}))}catch(s){}}}),[t,i,S]),Object(u.jsxs)(r.Fragment,{children:[i?Object(u.jsx)(d,{user:i}):Object(u.jsx)(p,{}),Object(u.jsx)(x,{placeholder:"Search for User's Repositories",path:null!==c&&void 0!==c?c:"/u/".concat(t),setvalue:k,disabled:!i}),m&&m.map((function(e){return Object(u.jsx)(h,{repo:e},e.id)})),i&&S&&null===m&&Object(u.jsx)(v,{})]})},N=function(e){var t=e.uri,c=e.location,a=Object(r.useState)((function(){var e;return c?decodeURIComponent(null!==(e=new URLSearchParams(c.search).get("q"))&&void 0!==e?e:""):""})),s=Object(n.a)(a,2),l=s[0],i=s[1],o=Object(r.useState)([]),d=Object(n.a)(o,2),h=d[0],O=d[1];return Object(r.useEffect)((function(){if(l){var e="q=".concat(l);try{var t=localStorage.getItem(e);if(t){var c=JSON.parse(t);O(c.length?c:null)}else j("search/users?".concat(e),(function(t){var c=t.items;localStorage.setItem(e,JSON.stringify(c)),O(c.length?c:null)}),(function(e){alert(e)}))}catch(a){console.error(a)}}else O([])}),[l]),Object(u.jsxs)(r.Fragment,{children:[Object(u.jsx)(x,{placeholder:"Search for Users",path:null!==t&&void 0!==t?t:"/",setvalue:i}),h&&h.map((function(e){return Object(u.jsx)(b,{user:e},e.id)})),l&&null===h&&Object(u.jsx)(v,{})]})};function S(){return Object(u.jsxs)("article",{className:"panel",children:[Object(u.jsx)("p",{className:"panel-heading",children:Object(u.jsx)(s.a,{to:"/",children:"GitHub searcher"})}),Object(u.jsxs)(s.b,{children:[Object(u.jsx)(N,{path:"/"}),Object(u.jsx)(g,{path:"/u/:login"})]}),Object(u.jsx)("div",{className:"panel-block is-pulled-right",children:Object(u.jsx)(s.a,{to:"/u/dvitaliy",className:"has-text-grey-lighter is-pulled-right",children:"@DVitaliy"})})]})}var k=document.getElementById("root");Object(a.render)(Object(u.jsx)(S,{}),k)}},[[25,1,2]]]);
//# sourceMappingURL=main.a2fa76f2.chunk.js.map